# auto-submit-dlu

# 禁止任何人使用此项目提供付费的代挂服务

#### 今日校园每日自动提交疫情上报py脚本，支持邮件推送提交结果消息

#### 本项目在子墨脚本基础上适配本校版本，请给原项目点个star

#### 本项目仅供学习交流使用，如作他用所承受的任何直接、间接法律责任一概与作者无关

#### 决

# 使用方式-配合腾讯云函数

1. clone 或者 下载 此仓库到本地
    ```shell script
    git clone https://github.com/Mahoo12138/auto-submit-dlu
    ```
2. 打开本地仓库文件夹，配置`config.yml`中对应的学号（username）和密码（password）还有地址（address）等等信息，详情请看`config.yml`中的注释说明，**注意这里的密码都是今日校园的登录密码**
3. 打开百度搜索[腾讯云函数](https://console.cloud.tencent.com/scf/index?rid=1)，注册认证后，进入控制台，点击左边的层，然后点新建，名称随意，然后点击上传zip，选择release中的`dependency.zip`上传，然后选择运行环境`python3.6`，然后点击确定，耐心等待一下，上传依赖包需要花费的时间比较长
![新建腾讯云函数依赖](screenshots/ed6044e6.png)
4. 点左边的函数服务，新建云函数，名称随意，运行环境选择`python3.6`，创建方式选择空白函数，然后点击下一步
![新建腾讯云函数](screenshots/a971478e.png)
5. 提交方法选择在线编辑，把本地修改好的`index.py`直接全文复制粘贴到云函数的`index.py`，然后点击文件->新建，文件名命名为`config.yml`，然后把本地配置好的`config.yml`文件中的内容直接全文复制粘贴到云函数的`config.yml`文件，点击下面的高级设置，设置超时时间为`60秒`，添加层为刚刚新建的函数依赖层，然后点击完成
![配置腾讯云函数](screenshots/1aa80c41.png)
6. 进入新建好的云函数，左边点击触发管理，点击创建触发器，名称随意，触发周期选择自定义，然后配置cron表达式，下面的表达式表示每天中午十二点整执行
    ```shell script
   0 0 12 * * * *
   ```
7. 然后就可以测试云函数了，绿色代表云函数执行成功，红色代表云函数执行失败（失败的原因大部分是由于依赖造成的）。返回结果是`success.`，代表自动提交成功，如遇到问题，请仔细查看日志
8. enjoy it!
9. 也可配合Windows计划任务或者使用 Linux 定时任务，将脚本挂在自己的云服务器上，不会就搜索一下，过程不再赘述

#### 如果问题中有省市县三级联动的位置，按`xx省/xx市/xx县`这个格式输入文本即可

#### 除非问题和答案都完全一样，否则不建议使用多用户配置

更多其他信息，参考原仓库：[ZimoLoveShuang/auto-submit: 今日校园自动提交疫情上报，通用](https://github.com/ZimoLoveShuang/auto-submit)

